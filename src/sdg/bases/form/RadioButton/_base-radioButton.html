<h2 id="base-radio-button">Boutons radio</h2>
<h3>Exemples</h3>

<qc-doc-exemple
        caption="Exemple de boutons radio avec différents états">
    <fieldset id="base-exemple-radio-md" aria-describedby="base-id_ex-md" class="qc-fieldset">
        <legend id="base-id_ex-md">Choisissez une option :</legend>

        <div class="qc-field-elements-flex qc-field-elements-flex-sm" style="--column-count: 1;">
            <label for="base-ex-md-option 1-fxwctmlnrb" class="qc-check-row">
                <input type="radio" id="base-ex-md-option 1-fxwctmlnrb" name="base-ex-md" value="option 1" aria-required="false" aria-invalid="false" checked>
                <span class="qc-check-text">
                    <span class="qc-check-label">Option 1</span>
                </span>
            </label>

            <label for="base-ex-md-option 2-b3fdtujwgpi" class="qc-check-row">
                <input type="radio" id="base-ex-md-option 2-b3fdtujwgpi" name="base-ex-md" value="option 2" aria-required="false" aria-invalid="false">
                <span class="qc-check-text">
                    <span class="qc-check-label">Option 2</span>
                </span>
            </label>

            <label for="base-ex-md-option 3-b2gsaxhwn6a" class="qc-check-row">
                <input type="radio" id="base-ex-md-option 3-b2gsaxhwn6a" name="base-ex-md" value="option 3" aria-required="false" aria-invalid="false" disabled="">
                <span class="qc-check-text">
                    <span class="qc-check-label">Option 3 (désactivée)</span>
                </span>
            </label>
        </div>
    </fieldset>

    <script>
        const baseGroup = document.getElementById("base-exemple-radio-md");

        baseGroup.addEventListener("change", () => {
            console.log(baseGroup.querySelector("input:checked").value);
        });
    </script>
</qc-doc-exemple>

<qc-doc-exemple
        caption="Exemple de boutons radio de petite taille avec une option désactivée et une option présélectionnée">
    <fieldset id="compact-base-exemple-radio-md" aria-describedby="base-id_ex-sm" class="qc-fieldset qc-compact">
        <legend id="compact-base-id_ex-md">Choisissez une option :</legend>

        <div class="qc-field-elements-flex qc-field-elements-flex-sm" style="--column-count: 1;">
            <label for="compact-base-ex-md-option 1-fxwctmlnrb" class="qc-check-row">
                <input type="radio" id="compact-base-ex-md-option 1-fxwctmlnrb" name="base-ex-sm" value="option 1" aria-required="false" aria-invalid="false" class="qc-compact">
                <span class="qc-check-text">
                    <span class="qc-check-label">Option 1</span>
                </span>
            </label>

            <label for="compact-base-ex-md-option 2-b3fdtujwgpi" class="qc-check-row">
                <input type="radio" id="compact-base-ex-md-option 2-b3fdtujwgpi" name="base-ex-sm" value="option 2" aria-required="false" aria-invalid="false" class="qc-compact">
                <span class="qc-check-text">
                    <span class="qc-check-label">Option 2</span>
                </span>
            </label>

            <label for="compact-base-ex-md-option 3-b2gsaxhwn6a" class="qc-check-row">
                <input type="radio" id="compact-base-ex-md-option 3-b2gsaxhwn6a" name="base-ex-sm" value="option 3" aria-required="false" aria-invalid="false" class="qc-compact">
                <span class="qc-check-text">
                    <span class="qc-check-label">Option 3</span>
                </span>
            </label>
        </div>
    </fieldset>
</qc-doc-exemple>

<qc-doc-exemple caption="Exemple de validation de formulaire avec des boutons radio">
    <form id="base-radio-form">
        <fieldset id="base-exemple-radio-form" aria-describedby="base-id_ex-form" class="qc-fieldset" data-required="true">
            <legend id="base-id_ex-form">Quel est votre niveau de scolarité?</legend>

            <div class="qc-field-elements-flex qc-field-elements-flex-sm" style="--column-count: 1;">
                <label for="base-ex-form-option 1-fxwctmlnrb" class="qc-check-row">
                    <input type="radio" id="base-ex-form-option 1-fxwctmlnrb" name="base-ex-form" value="Secondaire" aria-required="true" aria-invalid="false">
                    <span class="qc-check-text">
                        <span class="qc-check-label">Secondaire</span>
                    </span>
                </label>

                <label for="base-ex-form-option 2-b3fdtujwgpi" class="qc-check-row">
                    <input type="radio" id="base-ex-form-option 2-b3fdtujwgpi" name="base-ex-form" value="Professionnel" aria-required="true" aria-invalid="false">
                        <span class="qc-check-text">
                    <span class="qc-check-label">Professionnel</span>
                    </span>
                </label>

                <label for="base-ex-form-option 3-b2gsaxhwn6a" class="qc-check-row">
                    <input type="radio" id="base-ex-form-option 3-b2gsaxhwn6a" name="base-ex-form" value="Collégial" aria-required="true" aria-invalid="false">
                        <span class="qc-check-text">
                    <span class="qc-check-label">Collégial</span>
                    </span>
                </label>

                <label for="base-ex-form-option 4-b2gsaxhwn6a" class="qc-check-row">
                    <input type="radio" id="base-ex-form-option 4-b2gsaxhwn6a" name="base-ex-form" value="Universitaire" aria-required="true" aria-invalid="false">
                    <span class="qc-check-text">
                        <span class="qc-check-label">Universitaire</span>
                    </span>
                </label>
            </div>
        </fieldset>

        <fieldset id="base-exemple-radio-form-2" aria-describedby="base-id_ex-form-2" class="qc-fieldset" data-required="false">
            <legend id="base-id_ex-form-2">Êtes-vous présentement aux études?</legend>

            <div class="qc-field-elements-flex qc-field-elements-flex-sm" style="--column-count: 1;">
                <label for="base-ex-form-2-option 1-fxwctmlnrb" class="qc-check-row">
                    <input type="radio" id="base-ex-form-2-option 1-fxwctmlnrb" name="base-ex-form-2" value="oui" aria-required="false" aria-invalid="false">
                    <span class="qc-check-text">
                        <span class="qc-check-label">Oui</span>
                    </span>
                </label>

                <label for="base-ex-form-2-option 2-b3fdtujwgpi" class="qc-check-row">
                    <input type="radio" id="base-ex-form-2-option 2-b3fdtujwgpi" name="base-ex-form-2" value="non" aria-required="false" aria-invalid="false">
                    <span class="qc-check-text">
                        <span class="qc-check-label">Non</span>
                    </span>
                </label>
            </div>
        </fieldset>

        <button class="btn btn-sm btn-primary" type="submit">
            Soumettre
        </button>
    </form>

    <script>
        const baseRadioForm = document.getElementById("base-radio-form");

        baseRadioForm
            .addEventListener("submit", (event) => {
                event.preventDefault();
                let doSubmit = true;
                event.target.querySelectorAll("fieldset[data-required='true']").forEach(group => {
                    if (!group.querySelector("input:checked")) {
                        group.querySelectorAll("input[type='radio']").forEach(input => {
                            input.setAttribute("aria-invalid", "true");
                        });
                        doSubmit = false;

                        const alert = document.createElement("div");
                        alert.classList.add("qc-form-error");
                        alert.setAttribute("role", "alert");
                        setTimeout(() => {
                            alert.innerHTML = `
                              <div role="img"
                                   class="qc-icon"
                                   data-img-type="warning"
                                   style="--img-color: var(--qc-color-red-regular);
                                            --img-width: 24px;
                                            --img-height: 21px;
                                            display: none;
                                            "
                              ></div>
                              <span class="qc-form-error-message">Veuillez sélectionner une plateforme.</span>
                              `;
                        }, 10);
                        group.appendChild(alert);
                        group.classList.add("qc-fieldset-invalid");
                    }
                })
                if (doSubmit) {
                    alert(
                        "Formulaire soumis\n"
                        + Array.from(event.target.querySelectorAll("fieldset"))
                            .map((group) => {
                                    const legend = group.querySelector("legend").innerHTML;
                                    const value = group.querySelector("input:checked")?.value;
                                    return `Valeur pour "${legend}" : ${value ? value : "vide"}`;
                                }
                            )
                            .join("\n")
                    );
                }
            });

        baseRadioForm.querySelectorAll("input").forEach(input => {
            input.addEventListener("change", () => {
                input.ariaInvalid = "false";
                const parentFieldset = input.parentElement.parentElement.parentElement;
                parentFieldset.classList.remove("qc-fieldset-invalid");
                parentFieldset.querySelector(".qc-form-error")?.remove();
            });
        });
    </script>
</qc-doc-exemple>

<h3>Documentation technique</h3>

<div class="table-overflow">
    <table class="qc-table qc-striped">
        <thead>
        <tr>
            <th>Nom de classe ou variable</th>
            <th>Description des propriétés</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>qc-fieldset</td>
            <td>Disposition des éléments <code>fieldset</code> et leur contenu</td>
        </tr>
        <tr>
            <td>qc-field-elements-flex</td>
            <td>Affiche les éléments du fieldset en disposition <code>flex</code> sur colonne</td>
        </tr>
        <tr>
            <td>qc-field-elements-flex-sm</td>
            <td>Spécifie l'espacement entre les éléments de <code>fieldset</code> au token `small`</td>
        </tr>
        <tr>
            <td>qc-check-row</td>
            <td>Taille et disposition des boutons radio et leurs libellés</td>
        </tr>
        <tr>
            <td>qc-check-text</td>
            <td>Disposition des libellés et de leurs descriptions (pour les boutons de sélection)</td>
        </tr>
        <tr>
            <td>qc-check-label</td>
            <td>Affiche les libellés en gras</td>
        </tr>
        <tr>
            <td>qc-compact</td>
            <td>Affiche les boutons radio au format compact</td>
        </tr>
        <tr>
            <td>--column-count</td>
            <td>
                Nombre de colonnes pour un affichage en grille des boutons radio
                <br>Note : À utiliser pour les boutons de sélection seulement
            </td>
        </tr>
        </tbody>
    </table>
</div>