@use "../../scss/qc-sdg-lib" as *;

qc-search-input {
  display: block;
  width: 100%;
  // TODO mettre un token
  max-width: rem(548);
}

%qc-search-wrapper {
  @extend %qc-formcontrol-box;
  display: flex;
  align-items: center;
  &::before {
    border: 1px solid token-value(color formfield border);
  }
  button {
    @extend %qc-formcontrol-box;
    &::before {
      background: transparent;
    }
    width: rem(40);
    flex-shrink: 0;
  }
}

%qc-search-disabled {
  background-color: token-value(color grey pale);
  border: 1px solid token-value(color, grey, regular);
  cursor: not-allowed;
}

.qc-search-input {
  @extend %qc-search-wrapper;
  input[type=search] {
    display: block;
    position: relative;
    color: token-value(color text primary);
    width: 100%;
    background: transparent;
    //height: auto;
    margin-right: 0;
    padding: rem(8) rem(0) rem(8) rem(8);
    border: 0;
    // clears the ‘X’ from Chrome
    &::-webkit-search-decoration,
    &::-webkit-search-cancel-button,
    &::-webkit-search-results-button,
    &::-webkit-search-results-decoration {
      display: none;
    }
    &::placeholder {
      width: 100%;
      color: token-value(color grey medium);
      font-weight: normal;
      overflow: hidden;
    }
    &:placeholder-shown {
      text-overflow: ellipsis;
    }
    &:focus,&:focus-visible {
      outline: none;
    }
  }

  &.qc-search-left-icon {
    padding-left: token-value(spacer, xs);
  }

  button {
    @extend %qc-formcontrol-box;
    &::before {
      background: transparent;
    }
    cursor: pointer;
  }

  &.qc-search-left-icon-disabled {
    &::before {
      @extend %qc-search-disabled;
    }

    qc-icon {
      @extend %qc-search-disabled;
    }
  }
}


